########################################
# Custom decisions for the HashMP Multiplayer mod
#
# by Foffy123
########################################

country_decisions = {

	h_combat_janissary_decadence = {
		potential = {
			tag = TUR
			NOT = {
				has_country_modifier = h_janissary_decadence
			}
		}
		allow = {
			tag = TUR
			janissary_percentage = 0.1
			stability = 1
			mil_power = 100
			OR = {
				has_reform = t7_lp_1
				has_reform = t7_np_1
				has_reform = t7_np_2
			}
		}
		effect = {
			add_mil_power = -150
			add_country_modifier = {
				name = "h_janissary_decadence"
				duration = -1
			}
		}
	}
	h_ruler_tutor = {
		potential = {
			ai = no
			NOT = { has_country_flag = h_tutor_flag }
			NOT = {
				government = republic
			}
		}
		allow = {
			custom_trigger_tooltip = {
				tooltip = h_ruler_tutor_tooltip
				OR = {
					NOT = {
						adm = 3
						dip = 3
						mil = 3
					}
					NOT = {
						adm = 5
						dip = 2
						mil = 2
					}
					NOT = {
						adm = 2
						dip = 5
						mil = 2
					}
					NOT = {
						adm = 2
						dip = 2
						mil = 5
					}
					NOT = {
						adm = 4
						dip = 2
						mil = 3
					}
					NOT = {
						adm = 4
						dip = 3
						mil = 2
					}
					NOT = {
						adm = 3
						dip = 4
						mil = 2
					}
					NOT = {
						adm = 2
						dip = 4
						mil = 3
					}
					NOT = {
						adm = 2
						dip = 3
						mil = 4
					}
					NOT = {
						adm = 3
						dip = 2
						mil = 4
					}
				}
			}
		}
		effect = {
			change_adm = 1
			change_dip = 1
			change_mil = 1
			add_years_of_income = -0.5
			set_country_flag = h_tutor_flag
		}
	}
	h_austria-hungary_nation = {
		major = yes
		potential = {
			normal_or_historical_nations = yes
			was_never_end_game_tag_trigger = yes
			NOT = { has_country_flag = formed_ahu_flag }
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			NOT = { exists = AHU }
			OR = {
				tag = HAB
				tag = HUN
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 129  # krain
				province_id = 131  # zagrab
				province_id = 152  # varasd
				province_id = 1767 # slavonia
				province_id = 1769 # gorz
				province_id = 1826 # lika
				province_id = 4173 # szerem
				area = transdanubia_area
				area = alfold_area
				area = slovakia_area
				area = transylvania_area
				area = southern_transylvania_area
				area = tirol_area
				area = austria_proper_area
				area = inner_austria_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			adm_tech = 10
			is_free_or_tributary_trigger = yes
			is_at_war = no
			OR = {
				NOT = { exists = HAB }
				NOT = { exists = HUN }
			}
			transdanubia_area = { type = all is_core = ROOT owned_by = ROOT }
			alfold_area = { type = all is_core = ROOT owned_by = ROOT }
			slovakia_area = { type = all is_core = ROOT owned_by = ROOT }
			transylvania_area = { type = all is_core = ROOT owned_by = ROOT }
			southern_transylvania_area = { type = all is_core = ROOT owned_by = ROOT }
			tirol_area = { type = all is_core = ROOT owned_by = ROOT }
			austria_proper_area = { type = all is_core = ROOT owned_by = ROOT }
			inner_austria_area = { type = all is_core = ROOT owned_by = ROOT }
			owns_core_province = 129  # krain
			owns_core_province = 131  # zagrab
			owns_core_province = 152  # varasd
			owns_core_province = 1767 # slavonia
			owns_core_province = 1769 # gorz
			owns_core_province = 1826 # lika
			owns_core_province = 4173 # szerem
		}
	 	effect = {
			change_tag = AHU
			add_prestige = 25
			set_government_rank = 3
			AHU = {
				set_capital = 134 # Wien
			}
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_ahu_flag
#			add_country_modifier = {
#				name = "h_dual_monarchy"
#				duration = -1
#			}
			swap_non_generic_missions = yes
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	h_found_riyadh = {
		potential = {
			tag = ARB
			normal_or_historical_nations = yes
			OR = {
				ai = no
				is_playing_custom_nation = no
			}
			owns = 4275
			NOT = { has_country_flag = h_founded_riyadh }
		}
		allow = {
			is_core = 4275
			is_at_war = no
			4275 = { has_province_modifier = h_fortified_oasis }
		}
		effect = {
			4275 = {
				change_province_name = "Riyadh"
				rename_capital = "Riyadh"
				add_base_tax = 4
				add_base_manpower = 4
				add_base_production = 4
				change_trade_goods = cloth
				center_of_trade = 1
			}
			add_prestige = 10
			4275 = {
				move_capital_effect = yes
			}
			set_country_flag = h_founded_riyadh
		}
	}
	
	h_sok_jihad = {
		potential = {
			tag = SOK
			NOT = { has_country_flag = h_sok_declared_jihad }
		}
		allow = {
			stability = 1
			mil_power = 100
		}
		effect = {
			add_mil_power = -100
			set_country_flag = h_sok_declared_jihad
			country_event = { id = hashmp.5 } #Jihad Event
		}
	}
	
	h_hab_scion = {
		potential = {
			tag = HAB
			NOT = { has_country_flag = h_hab_scion_adopted }
		}
		allow = {
			stability = 1
			has_heir = no
			is_emperor = yes
		}
		effect = {
			set_country_flag = h_hab_scion_adopted
			country_event = { id = hashmp.6 } #Scion Event
		}
	}

	h_unify_indochina = {
		major = yes
		potential = {
			NOT = { has_country_flag = h_indochina_unified }
			OR = {
				tag = TAU
				tag = KHM
			}
		}
		provinces_to_highlight = {
			OR = {
				region = burma_region
				region = indo_china_region
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_free_or_tributary_trigger = yes
			burma_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			indo_china_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_at_war = no
		}
		effect = {
			set_government_rank = 3
			add_prestige = 25
			set_country_flag = h_indochina_unified
			add_country_modifier = {
				name = "h_indochina_mod"
				duration = -1
			}
		}
	}
	
	h_remove_regency = {
		potential = {
			ai = no
			NOT = { has_country_flag = h_regency_flag }
			NOT = {
				government = republic
			}
		}
		allow = {
			has_ruler = "(Regency Council)"
		}
		effect = {
			set_country_flag = h_regency_flag
			country_event = { id = hashmp.9 } #Regency Event
		}
	}		
	
	h_lot_formation = {
		potential = {
			ai = no
			tag = BUR
		}
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = alsace_area
						area = lower_rhineland_area
						area = north_rhine_area
						area = lorraine_area
						area = wallonia_area
						area = brabant_area
						area = north_brabant_area
						area = holland_area
						area = frisia_area
					}
					NOT = {
						ROOT = {
							num_of_owned_provinces_with = {
								value = 25 #out of 34
								is_core = root
								OR = {
									area = alsace_area
									area = lower_rhineland_area
									area = north_rhine_area
									area = lorraine_area
									area = wallonia_area
									area = brabant_area
									area = north_brabant_area
									area = holland_area
									area = frisia_area
								}
							}
						}
					}
				}
				province_id = 1878
				province_id = 189
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			owns_core_province = 1878
			owns_core_province = 189
			num_of_owned_provinces_with = {
				value = 25 #out of 34
				is_core = root
				OR = {
					area = alsace_area
					area = lower_rhineland_area
					area = north_rhine_area
					area = lorraine_area
					area = wallonia_area
					area = brabant_area
					area = north_brabant_area
					area = holland_area
					area = frisia_area
				}
			}
		}
		effect = {
			country_event = { id = new_flavour_bur.4 }
		}
	}
			
}